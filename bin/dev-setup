#!/bin/bash

# Required services
gcloud services enable --quiet \
    bigquery-json.googleapis.com \
    bigquerystorage.googleapis.com \
    compute.googleapis.com \
    cloudbuild.googleapis.com \
    iam.googleapis.com \
    pubsub.googleapis.com \
    run.googleapis.com

# PubSub
gcloud pubsub topics create pump

# BigQuery
bq mk pump
bq mk --schema source_id:string,event_id:string,event_ts:timestamp,random_metric:numeric \
      -t "pump.events"